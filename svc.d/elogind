#!/bin/sh
. /etc/leaninit.d/rc.svc

# elogind
NAME="elogind"
DAEMON=elogind-daemon

main() {
	dbus_req
	sleep 0.5
	fork "/usr/libexec/elogind/elogind"
	until [ "$(pgrep -x elogind-daemon)" != "" ]; do
		false
	done
	/usr/libexec/elogind/elogind-uaccess-command /dev
	for fs in $(df -t tmpfs | tail -n +2 | awk '{print $6}'); do
		/usr/libexec/elogind/elogind-uaccess-command $fs
	done
}

run elogind $1 $2
